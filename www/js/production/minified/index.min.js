function onDeviceReady(){$("#ip-setup-form-submit").bind("click",function(){var a=$("#ip-address").val(),b=$("#ip-port").val(),c=$("#ip-ssl").is(":checked");alert(a+" "+b+" "+c),$("#geo-setup").fadeOut("fast",function(){$("#geo-maps").fadeIn("fast",function(){var d=new geoApp({ipAddress:a,port:b,ssl:c,frequency:300});$("#pooler-find").bind("click",function(a){a.preventDefault(),d.geoConnect()}),$("#broadcast-location").bind("click",function(a){a.preventDefault(),d.broadcastLocation()})})})})}var geoApp=function(a){var b=this;this.defaults={ipAddress:"127.0.0.1",port:"8000",ssl:!1},this.socketInstance=null,this.watchId=null,this.options=$.extend(b.defaults,a,!0),this.geoConnect=function(){var a=b.options.ssl+"://"+b.options.ipAddress+":"+b.options.port;null===b.socketInstance?(b.socketInstance=io.connect(a,{"force new connection":!0}),console.log("Socket Initialized"),b.socketInstance.on("connect",function(){b.geoStartWatch(b.options.frequency)}),b.socketInstance.on("poolers",function(){})):b.geoStartWatch(b.options.frequency)},this.broadcastLocation=function(){},this.geoStartWatch=function(a){a=a||500;var c={frequency:a};b.watchId=navigator.geolocation.watchPosition(b.geoSuccess,b.geoError,c),console.log("Accelerometer watch initialized")},this.geoStopWatch=function(){b.watchId&&(navigator.geolocation.clearWatch(b.watchId),b.watchId=null)},this.geoSuccess=function(){null!==b.socketInstance&&b.socketInstance.emit("find poolers",{lat:acceleration.latitude,"long":acceleration.longitude})},this.geoError=function(){console.log("Geolocation error")}};$(document).ready(function(){}),document.addEventListener("deviceready",onDeviceReady,!1);